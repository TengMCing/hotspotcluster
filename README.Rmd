---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# hotspotcluster

<!-- badges: start -->
<!-- badges: end -->

The goal of hotspotcluster is to ...

## Installation

<!-- You can install the released version of hotspotcluster from [CRAN](https://CRAN.R-project.org) with: -->

<!-- ``` r -->
<!-- install.packages("hotspotcluster") -->
<!-- ``` -->

You can install the development version from [GitHub](https://github.com/) with:

``` r
install.packages("devtools")
devtools::install_github("TengMCing/hotspotcluster")
```
## Example

This is a basic example which shows you how to solve a common problem:

```{r echo = FALSE, message=FALSE, warning=FALSE, error=FALSE}
library(devtools)
load_all()
```

The built-in dataset `hotspots5000`.

```{r}
library(hotspotcluster)
str(hotspots5000)
```

```{r}
hotspots5000[1:10,]
```

```{r echo = FALSE, warning=FALSE, message=FALSE, error=FALSE, dpi=600, out.width = "70%"}
library(tidyverse)
library(rnaturalearth)
au_map <- ne_states(country = "Australia", returnclass = "sf")
vic_map <- au_map[7,]
ggplot(hotspots5000) +
  geom_sf(data = vic_map) +
  geom_point(aes(lon, lat), alpha = 0.3) +
  ggthemes::theme_map() +
  ggtitle("Raw Hotspots")
```


Perform spatiotemporal clustering on this dataset.

```{r example}
results <- hotspot_cluster(hotspots5000, 
                           lon = "lon", 
                           lat = "lat", 
                           obstime = "obstime",
                           ActiveTime = 24,
                           AdjDist = 3000,
                           ignition_center = "mean",
                           time_unit = "hours",
                           timestep = 1)
```

The ignition points of the first 10 bushfires.

```{r}
results$ignitions[1:10,]
```

The memberships of the first 10 hotspots.

```{r}
results$hotspots[1:10,]
```

```{r echo = FALSE, warning=FALSE, message=FALSE, error=FALSE, dpi=600, out.width = "70%"}
ggplot(results$ignitions) +
  geom_sf(data = vic_map) +
  geom_point(aes(ignition_lon, ignition_lat), alpha = 0.5) +
  ggthemes::theme_map() +
  ggtitle("Ignition Points")
```

