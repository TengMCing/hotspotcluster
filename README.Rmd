---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# spotoroo

<!-- badges: start -->
<!-- badges: end -->

The goal of spotoroo is to ...

## Installation

<!-- You can install the released version of spotoroo from [CRAN](https://CRAN.R-project.org) with: -->

<!-- ``` r -->
<!-- install.packages("spotoroo") -->
<!-- ``` -->

You can install the development version from [GitHub](https://github.com/) with:

``` r
install.packages("devtools")
devtools::install_github("TengMCing/spotoroo")
```
## Example

This is a basic example which shows you how to solve a common problem:

```{r echo = FALSE, message=FALSE, warning=FALSE, error=FALSE}
library(devtools)
load_all()
```

```{r}
library(spotoroo)
```


The built-in dataset `hotspots500`.

```{r}
str(hotspots500)
```

```{r}
hotspots500[1:10,]
```

```{r echo = TRUE, warning=FALSE, message=FALSE, error=FALSE, out.width = "70%", out.height="70%"}
library(tidyverse)
ggplot(hotspots500) +
  geom_sf(data = vic_map) +
  geom_point(aes(lon, lat), alpha = 0.3) +
  ggthemes::theme_map() +
  ggtitle("Raw Hotspots")
```


Perform spatiotemporal clustering on this dataset.

```{r example}
result <- hotspot_cluster(hotspots500,
                          lon = "lon",
                          lat = "lat",
                          obsTime = "obsTime",
                          activeTime = 24,
                          adjDist = 3000,
                          minPts = 4,
                          ignitionCenter = "mean",
                          timeUnit = "h",
                          timeStep = 1)
```

The ignition points of the first 10 bushfires.

```{r}
result$ignition[1:10,]
```

The memberships of the first 10 hotspots.

```{r}
result$hotspots[1:10,]
```

<!-- Summary of the clustering result. -->

<!-- ```{r} -->
<!-- summary(results) -->
<!-- ``` -->



Plot of the result.

```{r out.width = "70%", out.height="70%"}
plot(result,
     type = "def",
     cluster = "all",
     hotspot = TRUE, 
     noise = FALSE, 
     ignition = TRUE, 
     bg = plot_vic_map())
```


```{r out.width = "70%", out.height="70%"}
plot(result,
     type = "def",
     cluster = 1:3,
     hotspot = TRUE, 
     noise = FALSE, 
     ignition = TRUE,
     bg = plot_vic_map())
```


```{r out.width = "70%", out.height="70%"}
plot(result,
     type = "mov",
     cluster = 26:29,
     hotspot = TRUE, 
     bg = plot_vic_map())
```
